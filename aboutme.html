---
layout: page
title: About Me
subtitle:
---
<p>I'm Adam Runner, and I build things for the internet. I work at <a href="http://copio.us" target="_blank">COPIOUS</a> as a Software Engineer. I specialize in Ruby on Rails, but I also build with JavaScript, Backbone, Ember and I like to tinker with electronics and circuits too. I also love craft beer and coffee.</p>
<p>This is a line graph of the temperature in my apartment in Portland, OR. The data comes from a DS18S20 temperature sensor connected to an ESP8266 MCU, it acts as a stand alone sensor node. Every few minutes the "main" server pulls the data from the sensor node. It also pulls the current outdoor temperature from <a href="https://developer.forecast.io">Forecast.IO</a>, it then takes those two values and creates a JSON object and then sends the data up to <a href="https://data.sparkfun.com/output/ZGRYvQ5b3gHl5rwqbKoj">data.sparkfun.com</a>.</p>
<p id="graph">You can read about the initial build in this <a href="/2016-02-27-esp8266-adventures">blog post here.</a> Or the newer version of the <a href="/2016-03-26-iot-microservices-and-you">architecture here.</a>
<p>The line graph is drawn by gathering the data from the SparkFun JSON API, and feeding it to Google's JavaScript Charting library.</p>
<div id="chart" style="width: 100%; min-height:400px;">
  <div class='loader'>
    <i class="fa fa-spin fa-refresh fa-4x"></i>
  </div>
</div>
<hr class="small">
<br>
<em>The little ESP8266 temperature logger, sitting quietly on it's shelf</em>
<img src="/img/esp8266-temp-logger.jpg" class="center-block" alt="My faithful little temp logger sitting on it's shelf" />
<script src="https://www.google.com/jsapi"></script>
<script src="/js/moment.min.js"></script>
<script>

  // onload callback
  function drawChart() {

    var public_key = 'ZGRYvQ5b3gHl5rwqbKoj';
    var yesterday = moment().subtract(1, 'days').format()
    // JSONP request
    //TODO: Abstract this so it automatically refreshes the chart - setInterval or something similar
    //TODO: Add Controls for date range
    //https://data.sparkfun.com/output/ZGRYvQ5b3gHl5rwqbKoj.json?gte[timestamp]=11-30-2014&gte[temp]=100.0
    // https://data.sparkfun.com/output/ZGRYvQ5b3gHl5rwqbKoj.json
    var jsonData = $.ajax({
      url: 'https://data.sparkfun.com/output/' + public_key + '.json',
      data: {page: 1},
      dataType: 'jsonp',
    }).done(function (results) {

      var data = new google.visualization.DataTable();

      data.addColumn('datetime', 'Time');
      data.addColumn('number', 'Indoor °F');
      data.addColumn('number', 'Outdoor °F');

      $.each(results, function (i, row) {
        data.addRow([
          (new Date(row.timestamp)),
          parseFloat(row.indoor_temp),
          parseFloat(row.outside_temp)
        ]);
      });

      var chart = new google.visualization.LineChart($('#chart').get(0));
      var options = {
          title: 'Apartment temperature over time',
          legend:{position: 'top'},
          axisTitlesPosition: 'in',
          animation: {startup : true, duration: 500},
          chartArea:{left:"5%",top:"10%",width:'95%',height:'75%'}
        }

      chart.draw(data, options);

    });

  }

  // load chart lib
  google.load('visualization', '1', {
    packages: ['corechart']
  });

  // call drawChart once google charts is loaded
  google.setOnLoadCallback(drawChart);

</script>
